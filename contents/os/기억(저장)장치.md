## 기억(저장)장치 관리
- 1차 저장장치에 해당하는 메인 메모리와 2차 저장장치에 해당하는 하드디스크, NAND 등을 관리하는 기능
- 1차 기억장치 즉, 휘발성이 있는 장치는 기억장치, 휘발성이 없는 장치는 저장장치라고도 부른다

![스크린샷 2023-10-05 오전 1.46.23.png](..%2F..%2F..%2F..%2F..%2F..%2Fvar%2Ffolders%2F06%2F2rjvxyv16cn52ff_9wsypw680000gn%2FT%2FTemporaryItems%2FNSIRD_screencaptureui_34Orcv%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-05%20%EC%98%A4%EC%A0%84%201.46.23.png)

![](https://velog.velcdn.com/images/dddwsd/post/101b83b6-6479-496f-8acb-6587265cb0d7/image.png)

- **기억장치**는 컴퓨터에서 데이터를 **일시 혹은 영구적**으로 보존하는 장치를 뜻한다.
- 기억 장치는 주기억 장치(RAM, ROM)와 보조 기억장치(HDD, SSD)로 나눌 수 있다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F75Qfj%2FbtrqsdONpVC%2FgE6oGdz55kW8tyxaUAW0b1%2Fimg.png)

- 위 표에서 보는 것처럼 CPU에 가까울수록 데이터를 더 빠르게 읽어올 수 있고, 보조 기억 장치가 있는 아래에서부터 CPU까지 데이터를 읽어오려면 훨씬 시간이 오래 걸린다.

### 1차 저장장치
- CPU가 직접 접근할 수 있는 기억장치이다.
- 프로세스가 실행되려면 프로그램이 메모리에 올라와야 한다.
- 각 프로세스에 할당하는 메모리 영역의 할당과 해제
- 각 메모리 영역 간의 침범 방지
- 메인 메모리의 효율적 활용을 위한 가상메모리 기능
- 모두 소멸성(휘발성)을 갖고 있다.

### 2차 저장장치
- disk, NAND flash memory등을 지칭함
- 파일 형식의 데이터 저장
- 이런 파일 데이터 관리를 위한 파일 시스템을 OS에서 관리.
- 비휘발성 메모리

### 주기억장치
**RAM(Random Access Memory)**
CPU가 현재 사용 중인 프로그램이나 명령만을 **임시로 저장**하는 곳이다.

RAM의 Ramdom Acess는 무작위의 접근이 아니라, 메모리의 주소만 안다면 어느 위치든지 **임의로 접근**해도 동일한 시간이 걸린다.

이런 특징 때문에 파일의 현재 위치에서 순차적으로 저장된 데이터에 접근하는 보조기억장치(HDD, SSD, CD)과 다르게 접근 속도가 훨씬 빠르다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbCdcrZ%2FbtrqzYCQoWv%2F8IHDBMHapmB05RTs35tm1k%2Fimg.png)

일반적으로 주기억장치에 사용되는 기억 소자는 **DRAM(Dynamic RAM)과 SRAM(Static RAM)** 이 있다.

기억소자는 데이터가 저장되는 방이다. 데이터가 왔다는 전기신호를 받으면 메모리는 이 방(기억소자)에 데이터를 집어넣는다.  이 방에는 문이 있을 수도 있고, 없을 수도 있다.

비휘발성 메모리는 방에 문이 있는 메모리로, 문을 열어주지 않는 한 데이터는 방 밖으로 나오지 않는다. 반면 휘발성 메모리에는 문이 없어서 전원이 꺼지면 데이터는 방 밖으로 나와버린다.

RAM은 휘발성 메모리로 전원이 꺼지면 메모리에 저장된 내용들은 모두 사라진다.

**SRAM(Static RAM)**
CPU 안에 포함되어 캐시 메모리라고도 하며, CPU와 DRAM의 **속도 차이를 극복**하기 위해 CPU와 DRAM 사이에 존재하는 고속 기억 장치이다.

캐시 메모리는 시간적, 공간적 지역성을 기반으로 가까운 미래에 접근될 확률이 높은 데이터를 미리 보관하는 것이다.

**캐시 메모리의 저장 규칙**
- 시간적 지역성: 최근에 접근된 데이터가 가까운 미래에 또 한번 사용될 가능성이 높다.
- 공간적 지역성: 최근에 접근된 데이터의 주변 데이터가 사용될 가능성이 높다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FQrWy6%2FbtrqBd0xHUf%2F5UxxOSwjrYukJxogDM2bnK%2Fimg.png)

**DRAM(Dynamic RAM)**

우리가 흔히 말하는 메인 메모리를 뜻하며, SRAM보다 속도는 느리지만 집적도를 높이기 쉬워 메모리 용량이 크고 SRAM보다 상대적으로 저렴하다.

**ROM**
- ROM도 주기억장치 중 하나로, 조회 연산은 수행 가능하나, 쓰기 연산이 불가능한 메모리
- ROM은 컴퓨터의 전원이 끊어져도 그 내용이 (반)영구적으로 유지되는 비휘발성 메모리
- 바이오스와 같이 변경가능성이 없는 소프트웨어를 저장하는데 사용

#### 메인 메모리
- DRAM과 SRAM중 주로 DRAM을 뜻한다.
- CPU가 직접 접근할 수 있는 메모리
- 프로그램이 실행될 때 해당 프로그램이 복사되어 메모리에 적재되어 프로세스가 된다.
- CPU는 PC에의해 연산을 마친 후 메인 메모리에 데이터를 저장하거나 필요한 데이터를 조회한다.

![](https://github.com/le2sky/cs-operation-system/raw/main/os/resource/memory.PNG)

#### L1,L2,L3 캐시
L은 `level`을 나타내며, 속도와 크기에 차이가 존재한다.

**L1 캐시**는 크기는 작지만 CPU가 가장 빠르게 접근할 수 있고, CPU의 데이터 사용 및 검색에 가장 먼저 사용된다. 여기서 데이터를 찾지 못하면 L2와 L3 캐시 메모리로 넘어가게 된다.
CPU에서 필요로 하는 데이터가 캐시 메모리에 있어서 바로 접근할 수 있는지에 따라 Cache Memory의 성능이 된다
CPU가 필요한 데이터가 Cache Memory 내에 들어와 있으면 **Cache Hit(캐시 적중)** 라 한다. 반면 데이터가 캐시에 없으면 **Cache Miss(캐시 미스)** 라 하고 데이터를 주 메모리(DRAM) 또는 보조기억장치(스토리지)에서 캐시로 로드하도록 요청해야한다.

Cache Miss로인해 데이터를 load하는 과정은 생각보다 시간과 성능적인 측면에서 좋지못하기에, 캐시 적중률을 높이기위해선 캐시크기가 커야한다.

#### SRAM과 DRAM의 구조
**DRAM**은 캐패시터로 이루어져있는 소자의 집합체로, 각각의 축전기(capacitor 커패시터)가 담고 있는 전자의 수에 따라 전기신호를 1과 0으로 나타내는데 축전기가 시간이 지나면 방전되어 데이터를 잃는다.
그래서 일정 시간마다 **재충전**하여 데이터를 재생시켜야 되므로 **동적(Dynamic)** 이란 명칭이 주어진 것이다

**SRAM**은 트랜지스터로 이뤄진 소자의 집합체로, 일반적으로 여섯 개의 트랜지스터를 사용한다. 
두 쌍의 인버터를 통해 0과 1의 **데이터가 전원이 들어올 동안 계속 유지하고 있어서 정적(Static)**이란 명칭이 생겼다.

둘다 공통적으로 휘발성을 띄고있지만, DRAM의 경우 전기가 약해지면 데이터가 전부날라가지만, SRAM의 경우 지속적으로 공급이 된다면 메모리가 유지된다.

### 보조기억장치
- 주기억장치의 확장으로 데이터를 영구적으로 저장하는 비 휘발성 대용량 기억장치를 뜻한다.
- 단 그만큼, 속도나 성능적인 측면에서 느리다.

**HDD**
- 물리적인 디스크를 고속으로 회전시켜 데이터를 저장하는 장치

**SSD**
- 전기적으로 데이터를 저장하는 방식