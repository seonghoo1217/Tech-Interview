# Mutex vs Semaphore
- 이 두개념을 이해하기전 교착상태(Dead Lock)에 대한 이해가 기반이 되어야한다.
- **교착상태**는 공유자원을 서로 사용하기 위해 무한정대기하는 상태를 말하며, 공유자원은 임계영역에 존재한다.

## 임계 영역 (Critical Section)
- 여러 프로세스가 데이터를 공유하며 수행될 때, 각 프로세스에서 공유 데이터를 접근하는 프로그램 코드 부분
- 스레드간의 공유되는 자원에 동시접근하려고 할 때 문제 발생을 피하고자 독점을 보장해줘야하는 영역을 **임계영역**이라고 한다.
- 임계구역은 지정된 시간이 지난후 종료된다. 때문에 어떤 스레드나 프로세스가 임계 구역에 들어가고자하면, 지정된 시간만큼 대기해야한다.
- 스레드가 공유자원의 배타적인 사용을 보장받기 위해선 임계구역에 들어가거나 나올때는 세마포어 같은 동기화 매커니즘이 필요

### 임계영역 문제 해결책
1. Mutual exclusion(상호 배제) : 임계구역에는 하나의 프로세스만이 존재해야한다. 어떤 프로세스가 임계구역을 실행하고 있다면 다른 어떤 프로세스도 입장 불가
2. Progress(진행) : 임계구역에 존재하는 프로세스는 없지만, 입장요청이 2개 이상일 때, 진입 순서를 지정하여야한다.
3. Bounded wating(한정 대기) : 임계구역 입장에대한 권한은 모든 프로세스에 존재하나 진입횟수가 제한되어있다.

## 프로세스 동기화 문제 해결책
**동기화(Synchronization)**
- 프로세스나 스레드의 수행시점을 조절하는 것
  - 예를들어, A가 먼저 쓰는 작업을 수행한뒤, B가 읽어야지 수정사항이 반영되는 것
    - 만약 수행 시점을 조절해주지 않으면 실행순서에 따라 다른 수행결과가 나오게되고 이를 `Race Condition`이라고함

**Mutex Locks**
- Mutex = MUTual EXclusion '상호배제'라고 지칭한다.
- 마치 분산락처럼 원자성을 보존하기 위해 임계영역에 들어갈때 Lock을 걸고 나올때 푸는 방식 
- 다중 스레드 환경에서 공유 자원에 대한 동시 액세스를 제어하기 위한 동기화 메커니즘 중 하나

**Busy Waiting(바쁜 대기)**

![스크린샷 2023-10-06 오후 8.44.48.png](..%2F..%2F..%2F..%2F..%2F..%2Fvar%2Ffolders%2F06%2F2rjvxyv16cn52ff_9wsypw680000gn%2FT%2FTemporaryItems%2FNSIRD_screencaptureui_ZFJvNj%2F%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-06%20%EC%98%A4%ED%9B%84%208.44.48.png)

- os에서 원하는 자원을 얻기위해 다리는 것이 아니라 권한을 얻을 때까지 확인하는 것
- CPU의 자원을 쓸데 없이 낭비하기 때문에 좋지 않은 쓰레드 동기화 방식
- 임계영역에 다른 프로세스가 존재할 때 진입을 위해 계속 진입시도를 하기에 CPU의 낭비가 발생하는 것
- `Spin Lock `개념

**Semaphores(세마포어)**
- 세마포어는 Busy Waiting과 다르게

## 교착상태의 발생 조건
- 서로 다른 자원을 점유하고 있는 프로세스들이 서로 상대가 자원을 풀기만을 원하는 상태이다.
- 만약 하나의 조건이라도 만족하지 않는다면 데드락은 발생하지 않는다.
- **Mutual Exclusion(상호 배제)**
  - 하나의 리소스는 한번에 한 프로세스만이 사용할 수 있음
- **Hold And Wait (점유 대기)**
  - 프로세스는 반드시 하나 이상의 리소스를 점유한 상태에서 다른 프로세스의 자원을 기다리고 있음
- **No Preemption(비선점)**
  - 자원은 프로세스가 자발적으로 반환해야함
- **Circular Wait(순환 대기)**
  - 다른 자원을 기다리고 있는 프로세스들 각각, 꼬리물기 형태로 자원을 기다리는 순환대기 상태

## 대본
우선 뮤텍스와 세마포어를 발표하기 이전에 임계구역에 대한 개념을 짚 넘어가겠습니다.

### 임계구역
둘 이상의 스레드가 공유 자원에 접근할 때, 오직 한 스레드만 접근을 허용해야 하는 경우에 사용됩니다.
임계영역은 한 프로세스에 속한 스레드 간 동기화에만 사용되는 개념입니다.

multi thread 시스템에서 쓰레드가 공통의 변수를 바꾸거나, table을 업데이트하거나 파일에 써서 생기는 코드의 한 부분. 즉 공유 자원에 접근하는 코드의 영역을 말한다.

### 임계구역 문제
